JWT (JSON Web Token)
– הוא Token שמכיל בתוכו (ב-payload) מידע מזוהה על המשתמש (כגון userId, name).
– הוא חתום דיגיטלית בעזרת מחרוזת סודית (JWT_SECRET), כך שאפשר לאמת שלא נשמט או שונה.

מבנה ה-JWT

Header: מבנה ואלגוריתם החתימה (alg: HS256, typ: JWT)

Payload: אובייקט JSON עם הנתונים שלך (userId, name, ועוד אם תרצי)

Signature: HMAC-SHA256 של Base64(Header) + “.” + Base64(Payload) + ה-secret

למה צריך אותו?

אחרי שהמשתמש הוכח (login) הוא מקבל את ה-token ומאחסן אותו בצד הלקוח (למשל ב-localStorage או cookie).

בקריאות הבאות ל־API, מצרפים אותו בכותרת Authorization: Bearer <token>.

בצד השרת, ב־middleware לאימות (שנלמד ב-2.6), מבצעים jwt.verify(token, JWT_SECRET) כדי:

לוודא שהחתימה תקינה (לא זויפה)

לחלץ את ה-payload (למשל userId) ולהניח אותו ב־req.user

expiresIn: "1h"
– קובע שהטוקן יהיה תקף לשעה אחת בלבד; אחרי זה המשתמש ייאלץ להתחבר מחדש.

באופן כללי – התהליך הוא:

Register → hash+salt → שמירה ב־DB

Login → compare → sign JWT → החזרת token

Protected Routes → middleware jwt.verify → אם תקין, ממשיכים לבקשה

כך מתקבלת מערכת Authentication סטנדרטית, מאובטחת ומבוססת טוקנים ללא מצרך ב־session state בצד השרת.


דומה למשתמש קיים כדי לקבל תוקן: 
{
  "email": "vered@example.com",
  "password": "Secret123"
}

its time to travel




